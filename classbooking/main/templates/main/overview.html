{% extends "main/master/index.html" %}
<!---->
{% block title %} Overview {% endblock title %}
<!---->
{% block content %}
<h2 class="text-white">Classroom Timetable Overview</h2>

<div class="row">
    <!-- Calendar -->
    <div class="col-md-6">
        <div class="card p-3">
            <h4>Calendar View</h4>
            <div id="calendar"></div>
        </div>
    </div>

    <!-- Timeline -->
    <div class="col-md-6">
        <div class="card p-3">
            <h4>Timeline View</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Classroom</th>
                        <th>Booked By</th>
                        <th>Start</th>
                        <th>End</th>
                    </tr>
                </thead>
                <tbody>
                    {% for b in bookings %}
                    <tr>
                        <td>{{ b.classroom.name }}</td>
                        <td>{{ b.user.username }}</td>
                        <td>{{ b.start_time }}</td>
                        <td>{{ b.end_time }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4">No bookings yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        events: {{ events|safe }},
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
        }
    });
    calendar.render();
});
</script>
{% endblock content %}
